(this["webpackJsonpnoise-maker"]=this["webpackJsonpnoise-maker"]||[]).push([[0],{19:function(t,e,n){t.exports=n(44)},43:function(t,e,n){},44:function(t,e,n){"use strict";n.r(e);var o=n(1),r=n.n(o),a=n(14),i=n.n(a),s=n(17),c=n(2),u=n(3),l=n(5),d=n(4),p=n(6),m=(n(26),n(10)),f=n.n(m),N=n(15),h=n.n(N),v=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.children({containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight}))}}]),n}(r.a.Component),g=h()()(v),b=n(11),E=n(16),y=n.n(E),C=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var o;return Object(c.a)(this,n),(o=e.call(this,t)).loadInstrument=function(t){o.setState({instrument:null}),y.a.instrument(o.props.audioContext,t,{format:o.props.format,soundfont:o.props.soundfont,nameToUrl:function(t,e,n){return"".concat(o.props.hostname,"/").concat(e,"/").concat(t,"-").concat(n,".js")}}).then((function(t){o.setState({instrument:t})}))},o.playNote=function(t){o.props.audioContext.resume().then((function(){var e=o.state.instrument.play(t);o.setState({activeAudioNodes:Object.assign({},o.state.activeAudioNodes,Object(b.a)({},t,e))})}))},o.stopNote=function(t){o.props.audioContext.resume().then((function(){o.state.activeAudioNodes[t]&&(o.state.activeAudioNodes[t].stop(),o.setState({activeAudioNodes:Object.assign({},o.state.activeAudioNodes,Object(b.a)({},t,null))}))}))},o.stopAllNotes=function(){o.props.audioContext.resume().then((function(){Object.values(o.state.activeAudioNodes).forEach((function(t){t&&t.stop()})),o.setState({activeAudioNodes:{}})}))},o.state={activeAudioNodes:{},instrument:null},o}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadInstrument(this.props.instrumentName)}},{key:"componentDidUpdate",value:function(t,e){t.instrumentName!==this.props.instrumentName&&this.loadInstrument(this.props.instrumentName)}},{key:"render",value:function(){return this.props.render({isLoading:!this.state.instrument,playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes})}}]),n}(r.a.Component);C.defaultProps={format:"mp3",soundfont:"MusyngKite",instrumentName:"acoustic_grand_piano"};var O=C,j=n(18),R=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))).state={keysDown:{},noteDuration:.2},t.onPlayNoteInput=function(e){t.setState({notesRecorded:!1})},t.onStopNoteInput=function(e,n){var o=n.prevActiveNotes;!1===t.state.notesRecorded&&(t.recordNotes(o,t.state.noteDuration),t.setState({notesRecorded:!0,noteDuration:.2}))},t.recordNotes=function(e,n){if("RECORDING"===t.props.recording.mode){var o=e.map((function(e){return{midiNumber:e,time:t.props.recording.currentTime,duration:n}}));t.props.setRecording({events:t.props.recording.events.concat(o),currentTime:t.props.recording.currentTime+n})}},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props,e=(t.playNote,t.stopNote,t.recording,t.setRecording,Object(j.a)(t,["playNote","stopNote","recording","setRecording"])),n=this.props.recording,o=n.mode,a=n.currentEvents,i="PLAYING"===o?a.map((function(t){return t.midiNumber})):null;return r.a.createElement("div",null,r.a.createElement(p.b,Object.assign({playNote:this.props.playNote,stopNote:this.props.stopNote,onPlayNoteInput:this.onPlayNoteInput,onStopNoteInput:this.onStopNoteInput,activeNotes:i},e)))}}]),n}(r.a.Component);R.defaultProps={notesRecorded:!1};var k=R,A=(n(43),new(window.AudioContext||window.webkitAudioContext)),S={first:p.a.fromNote("c2"),last:p.a.fromNote("f5")},I=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var o;return Object(c.a)(this,n),(o=e.call(this,t)).state={recording:{mode:"RECORDING",events:[],currentTime:0,currentEvents:[]}},o.getRecordingEndTime=function(){return 0===o.state.recording.events.length?0:Math.max.apply(Math,Object(s.a)(o.state.recording.events.map((function(t){return t.time+t.duration}))))},o.setRecording=function(t){o.setState({recording:Object.assign({},o.state.recording,t)})},o.onClickPlay=function(){o.setRecording({mode:"PLAYING"}),f.a.uniq(f.a.flatMap(o.state.recording.events,(function(t){return[t.time,t.time+t.duration]}))).forEach((function(t){o.scheduledEvents.push(setTimeout((function(){var e=o.state.recording.events.filter((function(e){return e.time<=t&&e.time+e.duration>t}));o.setRecording({currentEvents:e})}),1e3*t))})),setTimeout((function(){o.onClickStop()}),1e3*o.getRecordingEndTime())},o.onClickStop=function(){o.scheduledEvents.forEach((function(t){clearTimeout(t)})),o.setRecording({mode:"RECORDING",currentEvents:[]})},o.onClickClear=function(){o.onClickStop(),o.setRecording({events:[],mode:"RECORDING",currentEvents:[],currentTime:0})},o.scheduledEvents=[],o}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,null,(function(e){var n=e.containerWidth;e.containerHeight;return r.a.createElement(O,{instrumentName:"acoustic_grand_piano",audioContext:A,hostname:"https://d1pzp51pvbm36p.cloudfront.net",render:function(e){var o=e.isLoading,a=e.playNote,i=e.stopNote;return r.a.createElement(k,{className:"PianoDarkTheme",recording:t.state.recording,setRecording:t.setRecording,noteRange:S,width:n,playNote:a,stopNote:i,disabled:o})}})})),r.a.createElement("div",{className:"button-group"},r.a.createElement("button",{className:"ui labeled icon button",onClick:this.onClickPlay},r.a.createElement("i",{className:"play icon"}),"Play"),r.a.createElement("button",{className:"ui labeled icon button",onClick:this.onClickStop},r.a.createElement("i",{className:"pause icon"}),"Pause"),r.a.createElement("button",{className:"ui labeled icon button",onClick:this.onClickClear},r.a.createElement("i",{className:"stop icon"}),"Clear")))}}]),n}(r.a.Component),P=function(){return r.a.createElement("div",{className:"ui container"},r.a.createElement("h1",null,"Try the Piano!"),r.a.createElement(I,null))};i.a.render(r.a.createElement(P,null),document.querySelector("#root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.4b51d34d.chunk.js.map